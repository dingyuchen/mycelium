{"pageProps":{"note":{"id":"6kkz0xmm5hm3yr3oqhyy4k6","title":"Nix Darwin","desc":"","updated":1667459159994,"created":1666425579784,"custom":{},"fname":"tooling.nix.darwin","type":"note","vault":{"fsPath":".","selfContained":true,"name":"mycelium","remote":{"type":"git","url":"git@github.com:dingyuchen/mycelium.git"}},"contentHash":"3e652da31192f00513339a446f109d13","links":[],"anchors":{"why":{"type":"header","text":"Why","value":"why","line":8,"column":0,"depth":2},"setting-up":{"type":"header","text":"Setting Up","value":"setting-up","line":17,"column":0,"depth":2},"appendix":{"type":"header","text":"Appendix","value":"appendix","line":25,"column":0,"depth":2},"gui-apps":{"type":"header","text":"GUI Apps","value":"gui-apps","line":27,"column":0,"depth":3},"fhs":{"type":"header","text":"FHS","value":"fhs","line":33,"column":0,"depth":3},"patchelf":{"type":"header","text":"PatchELF","value":"patchelf","line":38,"column":0,"depth":2}},"children":["aeyep204nrqd1svsek50ilw"],"parent":"smasnp7xn4wspgqjvfd5ihb","data":{}},"body":"<h1 id=\"nix-darwin\">Nix Darwin<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#nix-darwin\"></a></h1>\n<h2 id=\"why\">Why<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#why\"></a></h2>\n<p>Nix darwin brings the configuration.nix part of NixOS to macOS.\nI think its a good starting point to find out more about the nix ecosystem and framework.</p>\n<p>The main usecase for vanilla nix would be to create hermetic development environments, but that is not immediately necessary in the case of the work laptop, since most of the versioning and environment management is already handled by <code>spkit</code> and <code>make</code>.</p>\n<p>Furthermore, it makes more sense to use <code>nix-darwin</code> to replace the base environment before setting up repo-specific <code>nix-shell</code>s to maintain the developer experience.</p>\n<h2 id=\"setting-up\">Setting Up<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#setting-up\"></a></h2>\n<pre><code>darwin-rebuild switch -I darwin-config=dotfiles/darwin-configuration.nix\n</code></pre>\n<p>This sources the custom configuration. <code>ds</code> can be used as per normal after.</p>\n<h2 id=\"appendix\">Appendix<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#appendix\"></a></h2>\n<h3 id=\"gui-apps\">GUI Apps<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#gui-apps\"></a></h3>\n<blockquote>\n<p>Currently only system-level GUI apps are only linked into <code>~/Applications</code></p>\n<p>Refer to <a href=\"https://github.com/LnL7/nix-darwin/issues/276\">https://github.com/LnL7/nix-darwin/issues/276</a></p>\n</blockquote>\n<h3 id=\"fhs\">FHS<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#fhs\"></a></h3>\n<p><a href=\"https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard\">FHS</a> versions of <code>vscode</code> and <code>vscodium</code> are not supported on macOS.\nThere is also no need to use the FHS versions, since GUI apps are better managed as <code>brew casks</code> at this point in time anyway.</p>\n<h2 id=\"patchelf\">PatchELF<a aria-hidden=\"true\" class=\"anchor-heading icon-link\" href=\"#patchelf\"></a></h2>\n<hr>\n<strong>Children</strong>\n<ol>\n<li><a href=\"/mycelium/notes/aeyep204nrqd1svsek50ilw\">Fish</a></li>\n</ol>","noteIndex":{"fname":"self","stub":true,"vault":{"fsPath":".","selfContained":true,"name":"mycelium","remote":{"type":"git","url":"git@github.com:dingyuchen/mycelium.git"}},"schemaStub":false,"type":"note","updated":1670335116867,"created":1670335116867,"id":"jeno2gw2ru0lk2hjk1t6kfu","desc":"","links":[],"anchors":{},"children":["70y9r1m7w3dczky3qheeu6x","z2mx05a21tjcul6e2zpymg8","7v6qrwbbehg9qifk52eo107"],"parent":null,"body":"","data":{},"title":"Self","custom":{"nav_order":0,"permalink":"/"}},"collectionChildren":null,"customHeadContent":null,"config":{"version":5,"dev":{"enablePreviewV2":true,"enableSelfContainedVaults":true},"commands":{"lookup":{"note":{"selectionMode":"extract","confirmVaultOnCreate":true,"vaultSelectionModeOnCreate":"smart","leaveTrace":false,"bubbleUpCreateNew":true,"fuzzThreshold":0.2}},"randomNote":{},"insertNoteLink":{"aliasMode":"none","enableMultiSelect":false},"insertNoteIndex":{"enableMarker":false},"copyNoteLink":{"aliasMode":"title"},"templateHierarchy":"template"},"workspace":{"vaults":[{"fsPath":"dependencies/localhost/workplace","selfContained":true,"name":"workplace"},{"fsPath":".","selfContained":true,"name":"mycelium","remote":{"type":"git","url":"git@github.com:dingyuchen/mycelium.git"}}],"journal":{"dailyDomain":"daily","name":"journal","dateFormat":"y.MM.dd","addBehavior":"childOfDomain"},"scratch":{"name":"scratch","dateFormat":"y.MM.dd.HHmmss","addBehavior":"asOwnDomain"},"task":{"name":"task","dateFormat":"y.MM.dd","addBehavior":"childOfCurrent","statusSymbols":{"":" ","wip":"w","done":"x","assigned":"a","moved":"m","blocked":"b","delegated":"l","dropped":"d","pending":"y"},"taskCompleteStatus":["done","x"],"prioritySymbols":{"H":"high","M":"medium","L":"low"},"todoIntegration":true,"createTaskSelectionType":"selection2link"},"graph":{"zoomSpeed":1,"createStub":false},"enableAutoCreateOnDefinition":false,"enableXVaultWikiLink":false,"enableRemoteVaultInit":true,"enableUserTags":true,"enableHashTags":true,"workspaceVaultSyncMode":"noCommit","enableAutoFoldFrontmatter":false,"enableEditorDecorations":true,"maxPreviewsCached":10,"maxNoteLength":204800,"enableFullHierarchyNoteTitle":false},"preview":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enablePrettyRefs":true,"enableKatex":true,"automaticallyShowPreview":false},"publishing":{"enableFMTitle":true,"enableNoteTitleForLink":true,"enablePrettyRefs":true,"enableKatex":true,"copyAssets":true,"siteHierarchies":["self","programs","tooling"],"writeStubs":false,"siteRootDir":"docs","assetsPrefix":"/mycelium","siteUrl":"https://dingyuchen.github.io/","seo":{"title":"Mycelium","description":"Ding's Digital Garden"},"github":{"enableEditLink":true,"editLinkText":"Edit this page on GitHub","editBranch":"main","editViewMode":"tree"},"enableSiteLastModified":true,"enableFrontmatterTags":true,"enableHashesForFMTags":false,"enableRandomlyColoredTags":true,"enableTaskNotes":true,"enablePrettyLinks":true,"duplicateNoteBehavior":{"action":"useVault","payload":["workplace","mycelium"]},"searchMode":"lookup","siteFaviconPath":"favicon.ico","siteIndex":"self"}}},"__N_SSG":true}